(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{7989:function(e,t,r){"use strict";r.d(t,{lL:function(){return o}});r(7294);var n=r(9057),a=r.n(n),i=r(5893),o=function(e){var t=e.children,r={flex:1,paddingHorizontal:e.isMobile?24:120};return(0,i.jsx)(a(),{style:{flex:1},children:(0,i.jsx)(a(),{style:r,children:t})})};r(2042),r(5675)},7660:function(e,t,r){"use strict";r.d(t,{F:function(){return o}});var n=r(7294),a=r(5390),i=r.n(a),o=function(){var e=(0,n.useState)(!1),t=e[0],r=e[1],a=i()().width;return(0,n.useEffect)((function(){r(a<1400)}),[a]),{isMobile:t}}},3651:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return L}});var n=r(29),a=r(7794),i=r.n(a),o=r(7294),s=r(7989),u=r(9057),l=r.n(u),c=r(8409),d=r.n(c),f=r(4965),h=r.n(f),p=r(9893),g=r.n(p),m=r(4053);var v={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let y;const b=new Uint8Array(16);function x(){if(!y&&(y="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!y))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return y(b)}const w=[];for(let U=0;U<256;++U)w.push((U+256).toString(16).slice(1));function E(e,t=0){return(w[e[t+0]]+w[e[t+1]]+w[e[t+2]]+w[e[t+3]]+"-"+w[e[t+4]]+w[e[t+5]]+"-"+w[e[t+6]]+w[e[t+7]]+"-"+w[e[t+8]]+w[e[t+9]]+"-"+w[e[t+10]]+w[e[t+11]]+w[e[t+12]]+w[e[t+13]]+w[e[t+14]]+w[e[t+15]]).toLowerCase()}var S=function(e,t,r){if(v.randomUUID&&!t&&!e)return v.randomUUID();const n=(e=e||{}).random||(e.rng||x)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return E(n)},I=r(7660),k=r(1163),C=r(9009),j=r.n(C),_=r(5893),z="https://script.google.com/macros/s/AKfycbxizjvxjzwDKJK_VK14XhAD3LAf2xtr1KIxbam322vuV3LwRTbKVI4tUxWDZoaEWlCsOQ/exec",R="https://zgtxpheizfaytyphdejc.supabase.co/storage/v1/object/public/images/";function L(){var e=(0,I.F)().isMobile,t=(0,o.useState)(!0),r=t[0],a=t[1],u=(0,o.useState)(""),c=u[0],f=u[1],p=(0,o.useState)(),v=p[0],y=p[1],b=(0,k.useRouter)(),x=(0,o.useState)(""),w=x[0],E=x[1],C=(0,o.useState)(!1),L=C[0],U=C[1],D=(0,m.useUser)(),M=(0,m.useSupabaseClient)();function O(){return P.apply(this,arguments)}function P(){return(P=(0,n.Z)(i().mark((function e(){var t,r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("first name: ",w),e.next=3,M.storage.from("images").upload(D.id+"/"+w,v);case 3:t=e.sent,r=t.data,n=t.error,r||console.log(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,o.useEffect)((function(){D||(U(!0),b.push("/")),console.log("Current user: ",D)}),[D]);var A=function(){var e=(0,n.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("capture"),f(window.URL.createObjectURL(t.files[0])),a(!0),y(t.files[0]),r=S(),E(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function T(){return N.apply(this,arguments)}function N(){return(N=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.auth.signOut();case 2:t=e.sent,t.error;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(""),a(!1),U(!0),e.next=5,O();case 5:return t=R+D.id+"/"+w,console.log("url: ",t),e.prev=7,e.next=10,fetch(z,{method:"POST",mode:"no-cors",body:JSON.stringify(t)});case 10:return e.next=12,T();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})))).apply(this,arguments)}return(0,_.jsxs)(s.lL,{isMobile:e,children:[!e&&(0,_.jsx)(l(),{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,_.jsx)(d(),{children:"Please use only phone to open the Tuler."})}),L&&(0,_.jsx)(l(),{style:{flex:1,justifyContent:"center",alignItems:"center"},children:(0,_.jsx)(j(),{size:"large"})}),e&&!L&&(0,_.jsxs)(l(),{style:{flex:1,marginTop:24},children:[(0,_.jsx)(l(),{style:{flex:1,borderColor:"gray",borderWidth:1,borderRadius:"10px"},children:(0,_.jsxs)("label",{style:{width:"100%",height:"100%"},children:[(0,_.jsx)(l(),{style:{flex:1,justifyContent:"center",alignItems:"center",marginTop:"100px"},children:(0,_.jsx)(d(),{style:{paddingHorizontal:"20px",textAlign:"center"},children:"Click anywhere to activate Camera"})}),(0,_.jsx)("input",{type:"file",id:"capture",accept:"image/*,video/*",capture:!0,multiple:!0,onChange:A,style:{display:"none"}})]})}),(0,_.jsx)(l(),{style:{marginVertical:24,flex:1},children:r&&(0,_.jsx)(l(),{style:{flex:1,justifyContent:"center",alignContent:"center"},children:(0,_.jsx)(h(),{style:{width:200,height:200,alignSelf:"center",borderRadius:12},source:{uri:c}})})}),(0,_.jsx)(l(),{style:{marginBottom:32},children:(0,_.jsx)(g(),{title:"send",color:"blue",borderRadius:"12px",onPress:function(){return W.apply(this,arguments)}})})]})]})}},575:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main",function(){return r(3651)}])},9009:function(e,t,r){"use strict";var n=r(4836).default,a=r(5263).default;t.__esModule=!0,t.default=void 0;var i=n(r(434)),o=n(r(7071)),s=a(r(7294)),u=n(r(4099)),l=n(r(9057)),c=["animating","color","hidesWhenStopped","size","style"],d=e=>s.createElement("circle",{cx:"16",cy:"16",fill:"none",r:"14",strokeWidth:"4",style:e}),f=s.forwardRef(((e,t)=>{var r=e.animating,n=void 0===r||r,a=e.color,u=void 0===a?"#1976D2":a,f=e.hidesWhenStopped,g=void 0===f||f,m=e.size,v=void 0===m?"small":m,y=e.style,b=(0,o.default)(e,c),x=s.createElement("svg",{height:"100%",viewBox:"0 0 32 32",width:"100%"},d({stroke:u,opacity:.2}),d({stroke:u,strokeDasharray:80,strokeDashoffset:60}));return s.createElement(l.default,(0,i.default)({},b,{accessibilityRole:"progressbar",accessibilityValueMax:1,accessibilityValueMin:0,ref:t,style:[h.container,y]}),s.createElement(l.default,{children:x,style:["number"===typeof v?{height:v,width:v}:p[v],h.animation,!n&&h.animationPause,!n&&g&&h.hidesWhenStopped]}))}));f.displayName="ActivityIndicator";var h=u.default.create({container:{alignItems:"center",justifyContent:"center"},hidesWhenStopped:{visibility:"hidden"},animation:{animationDuration:"0.75s",animationKeyframes:[{"0%":{transform:[{rotate:"0deg"}]},"100%":{transform:[{rotate:"360deg"}]}}],animationTimingFunction:"linear",animationIterationCount:"infinite"},animationPause:{animationPlayState:"paused"}}),p=u.default.create({small:{width:20,height:20},large:{width:36,height:36}}),g=f;t.default=g,e.exports=t.default},4965:function(e,t,r){"use strict";var n=r(4836).default,a=r(5263).default;t.__esModule=!0,t.default=void 0;var i=n(r(2122)),o=n(r(434)),s=n(r(7071)),u=a(r(7294)),l=n(r(3820)),c=r(9025),d=r(7874),f=n(r(9096)),h=n(r(5238)),p=n(r(4099)),g=n(r(7905)),m=n(r(9057)),v=["accessibilityLabel","blurRadius","defaultSource","draggable","onError","onLayout","onLoad","onLoadEnd","onLoadStart","pointerEvents","source","style"],y="LOADED",b="LOADING",x=0,w=/^(data:image\/svg\+xml;utf8,)(.*)/;function E(e){var t=null;if("number"===typeof e){var r=(0,c.getAssetByID)(e);if(null==r)throw new Error('Image: asset with ID "'+e+'" could not be found. Please check the image source or packager.');var n=r.scales[0];if(r.scales.length>1){var a=h.default.get();n=r.scales.reduce(((e,t)=>Math.abs(t-a)<Math.abs(e-a)?t:e))}var i=1!==n?"@"+n+"x":"";t=r?r.httpServerLocation+"/"+r.name+i+"."+r.type:""}else"string"===typeof e?t=e:e&&"string"===typeof e.uri&&(t=e.uri);if(t){var o=t.match(w);if(o){var s=o[1],u=o[2];return""+s+encodeURIComponent(u)}}return t}var S=u.forwardRef(((e,t)=>{var r=e.accessibilityLabel,n=e.blurRadius,a=e.defaultSource,i=e.draggable,h=e.onError,w=e.onLayout,S=e.onLoad,I=e.onLoadEnd,j=e.onLoadStart,_=e.pointerEvents,z=e.source,R=e.style,L=(0,s.default)(e,v);var U=u.useState((()=>{var e=E(z);if(null!=e&&f.default.has(e))return y;return"IDLE"})),D=U[0],M=U[1],O=u.useState({}),P=O[0],A=O[1],T=u.useContext(g.default),N=u.useRef(null),W=u.useRef(x++),V=u.useRef(null),B=D===y||D===b&&null==a,F=function(e,t,r){var n=p.default.flatten(e),a=n.filter,i=n.resizeMode,o=n.shadowOffset,s=n.tintColor,u=[],l=null;if(a&&u.push(a),t&&u.push("blur("+t+"px)"),o){var c=(0,d.createBoxShadowValue)(n);c&&u.push("drop-shadow("+c+")")}return s&&null!=r&&u.push("url(#tint-"+r+")"),u.length>0&&(l=u.join(" ")),delete n.blurRadius,delete n.shadowColor,delete n.shadowOpacity,delete n.shadowOffset,delete n.shadowRadius,delete n.tintColor,delete n.overlayColor,delete n.resizeMode,[n,i,l,s]}(R,n,W.current),K=F[0],H=F[1],Z=F[2],q=F[3],X=e.resizeMode||H||"cover",J=B?z:a,$=E(J),G=function(e){if("number"===typeof e){var t=(0,c.getAssetByID)(e);return{height:t.height,width:t.width}}if(null!=e&&!Array.isArray(e)&&"object"===typeof e)return{height:e.height,width:e.width}}(J),Q=$?'url("'+$+'")':null,Y=function(){if(null!=N.current&&("center"===X||"repeat"===X)){var e=N.current,t=e.naturalHeight,r=e.naturalWidth,n=P.height,a=P.width;if(t&&r&&n&&a){var i=Math.min(1,a/r,n/t),o=Math.ceil(i*r),s=Math.ceil(i*t);return o+"px "+s+"px"}}}(),ee=$?(0,l.default)("img",{alt:r||"",style:k.accessibilityImage$raw,draggable:i||!1,ref:N,src:$}):null;var te=E(z);return u.useEffect((()=>{function e(){null!=V.current&&(f.default.abort(V.current),V.current=null)}return e(),null!=te&&(M(b),j&&j(),V.current=f.default.load(te,(function(e){M(y),S&&S(e),I&&I()}),(function(){M("ERRORED"),h&&h({nativeEvent:{error:"Failed to load resource "+te+" (404)"}}),I&&I()}))),e}),[te,V,M,h,S,I,j]),u.createElement(m.default,(0,o.default)({},L,{accessibilityLabel:r,onLayout:function(e){if("center"===X||"repeat"===X||w){var t=e.nativeEvent.layout;w&&w(e),A(t)}},pointerEvents:_,ref:t,style:[k.root,T&&k.inline,G,K]}),u.createElement(m.default,{style:[k.image,C[X],{backgroundImage:Q,filter:Z},null!=Y&&{backgroundSize:Y}],suppressHydrationWarning:!0}),ee,function(e,t){return e&&null!=t?u.createElement("svg",{style:{position:"absolute",height:0,visibility:"hidden",width:0}},u.createElement("defs",null,u.createElement("filter",{id:"tint-"+t,suppressHydrationWarning:!0},u.createElement("feFlood",{floodColor:""+e,key:e}),u.createElement("feComposite",{in2:"SourceAlpha",operator:"atop"})))):null}(q,W.current))}));S.displayName="Image";var I=S;I.getSize=function(e,t,r){f.default.getSize(e,t,r)},I.prefetch=function(e){return f.default.prefetch(e)},I.queryCache=function(e){return f.default.queryCache(e)};var k=p.default.create({root:{flexBasis:"auto",overflow:"hidden",zIndex:0},inline:{display:"inline-flex"},image:(0,i.default)((0,i.default)({},p.default.absoluteFillObject),{},{backgroundColor:"transparent",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"100%",width:"100%",zIndex:-1}),accessibilityImage$raw:(0,i.default)((0,i.default)({},p.default.absoluteFillObject),{},{height:"100%",opacity:0,width:"100%",zIndex:-1})}),C=p.default.create({center:{backgroundSize:"auto"},contain:{backgroundSize:"contain"},cover:{backgroundSize:"cover"},none:{backgroundPosition:"0",backgroundSize:"auto"},repeat:{backgroundPosition:"0",backgroundRepeat:"repeat",backgroundSize:"auto"},stretch:{backgroundSize:"100% 100%"}}),j=I;t.default=j,e.exports=t.default},5238:function(e,t,r){"use strict";var n=r(4836).default;t.__esModule=!0,t.default=void 0;var a=n(r(3256));class i{static get(){return a.default.get("window").scale}static getFontScale(){return a.default.get("window").fontScale||i.get()}static getPixelSizeForLayoutSize(e){return Math.round(e*i.get())}static roundToNearestPixel(e){var t=i.get();return Math.round(e*t)/t}}t.default=i,e.exports=t.default},9025:function(e,t){"use strict";t.__esModule=!0,t.getAssetByID=function(e){return r[e-1]},t.registerAsset=function(e){return r.push(e)};var r=[]},9096:function(e,t){"use strict";t.__esModule=!0,t.default=t.ImageUriCache=void 0;var r=/^data:/;class n{static has(e){var t=n._entries;return r.test(e)||Boolean(t[e])}static add(e){var t=n._entries,r=Date.now();t[e]?(t[e].lastUsedTimestamp=r,t[e].refCount+=1):t[e]={lastUsedTimestamp:r,refCount:1}}static remove(e){var t=n._entries;t[e]&&(t[e].refCount-=1),n._cleanUpIfNeeded()}static _cleanUpIfNeeded(){var e,t,r=n._entries,a=Object.keys(r);a.length+1>n._maximumEntries&&(a.forEach((n=>{var a=r[n];(!t||a.lastUsedTimestamp<t.lastUsedTimestamp)&&0===a.refCount&&(e=n,t=a)})),e&&delete r[e])}}t.ImageUriCache=n,n._maximumEntries=256,n._entries={};var a=0,i={},o={abort(e){var t=i[""+e];t&&(t.onerror=null,t.onload=null,t=null,delete i[""+e])},getSize(e,t,r){var n=!1,a=setInterval(u,16),s=o.load(e,u,(function(){"function"===typeof r&&r();o.abort(s),clearInterval(a)}));function u(){var e=i[""+s];if(e){var r=e.naturalHeight,u=e.naturalWidth;r&&u&&(t(u,r),n=!0)}n&&(o.abort(s),clearInterval(a))}},has:e=>n.has(e),load(e,t,r){a+=1;var n=new window.Image;return n.onerror=r,n.onload=e=>{var r=()=>t({nativeEvent:e});"function"===typeof n.decode?n.decode().then(r,r):setTimeout(r,0)},n.src=e,i[""+a]=n,a},prefetch:e=>new Promise(((t,r)=>{o.load(e,(()=>{n.add(e),n.remove(e),t()}),r)})),queryCache(e){var t={};return e.forEach((e=>{n.has(e)&&(t[e]="disk/memory")})),Promise.resolve(t)}},s=o;t.default=s}},function(e){e.O(0,[213,774,888,179],(function(){return t=575,e(e.s=t);var t}));var t=e.O();_N_E=t}]);